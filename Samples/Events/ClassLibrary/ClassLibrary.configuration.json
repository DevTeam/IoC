[
    { "reference": "Contracts" },
    { "reference": "ClassLibrary" },

    { "using": "System" },
    { "using": "System.Collections.Generic" },
    { "using": "Contracts" },
    { "using": "ClassLibrary" },

    {
        "GetDependecies": [
            { "Wellknown": "All" }
        ]
    },

    {
        "Apply": [
            {
                "Register": [
                    { "Contract": [ "IName<>" ] }
                ],
                "AsAutowiring": "Name<>"
            },

            {
                "Register": [
                    { "Contract": [ "ILogger<>" ] }
                ],
                "AsAutowiring": "Logger<>"
            },

            {
                "Register": [
                    { "Type": "DateTimeOffset"},
                    { "Contract": [ "Event<DateTimeOffset>" ] }
                ],
                "AsAutowiring": "Event<DateTimeOffset>",
                "Constructor": [
                    {
                        "Type": "ILogger<Event<DateTimeOffset>>"
                    },
                    {
                        "Type": "DateTimeOffset",
                        "State": { "Type": "DateTimeOffset" }
                    }
                ]
            },

            {
                "Register": [
                    { "Contract": [ "IEventConsumer<Event<DateTimeOffset>>" ] }
                ],
                "AsAutowiring": "Chronometer"
            },

            {
                "Register": [
                    { "Contract": [ "IEventProducer<Event<DateTimeOffset>>" ] }
                ],
                "AsAutowiring": "Timer",
                "Constructor": [
                    {
                        "Type": "ILogger<Timer>"
                    },
                    {
                        "Type": "Func<DateTimeOffset, Event<DateTimeOffset>>"
                    },
                    {
                        "Type": "TimeSpan",
                        "Value": "00:00:01"
                    }
                ]
            },

            {
                "Register": [
                    { "Lifetime": "Singleton" },
                    { "Lifetime": "AutoDisposing" },
                    { "Contract": [ "IEventBroker" ] }
                ],
                "AsAutowiring": "EventBroker<Event<DateTimeOffset>>"
            }
        ]
    }
]
